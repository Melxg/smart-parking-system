<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Parking</title>
  <script src="./js/guard.js"></script>

  <link rel="stylesheet" href="./css/style.css" />
  <!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

</head>
<body>

  <h1>ðŸš— Smart Parking System</h1>
  <a href="add-parking.html">Add Parking</a>

  <button id="findParkingBtn">Find Parking Near Me</button>
  <input
  type="text"
  id="searchInput"
  placeholder="Search location..."
/>
<button id="searchBtn">Search</button>


  <div id="map"></div>
  <div id="parking-list"></div>

  <a href="my-parking.html">My Parkings</a>
  <a href="active-session.html"> View Active Session/a>
 <button onclick="logout()">Logout</button>


  <!-- JS FILES -->
   <!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="./js/api.js"></script>
  <script src="./js/map.js"></script>
  <script src="./js/search.js"></script>
  <script src="js/session.js"></script>
<!-- Add this script at the top of home.html -->
<script>
// Check if user is logged in
document.addEventListener("DOMContentLoaded", function() {
    const token = localStorage.getItem("token");
    if (!token) {
        window.location.href = "/login.html";
    }
    
    // Optional: Show user info
    const userEmail = localStorage.getItem("userEmail");
    const userRole = localStorage.getItem("userRole");
    
    if (userEmail) {
        // You can display user info in the UI
        const userInfoElement = document.getElementById("userInfo");
        if (userInfoElement) {
            userInfoElement.textContent = `Logged in as: ${userEmail} (${userRole})`;
        }
    }
});
</script>

</body>
</html>